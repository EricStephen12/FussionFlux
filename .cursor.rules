bro folow these rules strictly and udate urself everytime you have accomplishes a step and always reference to it before making any changes the ones marked x have being done the ones not marked as not be done or as being done halfway
I have an existing SaaS codebase for an email+SMS automation platform with the following major sections:

Dashboard (/dashboard) – Shows live analytics (open rate, conversion rate, revenue, click rate, charts, etc.).

Campaign Creation (/dashboard/campaign) – This page handles:

Creating a New Campaign:
- [x] When a user clicks "Create New Campaign," the AB testing flow is launched.
- [x] The campaign can be sent immediately or scheduled based on the target country's local time.
- [x] Users should see their saved/created email templates.
- [x] Audience Selector: Uses AI to fetch and score leads based on the selected niche.
- [x] Import Contacts CSV: Positioned below the audience selector.
- [x] Follow-Up Section: Users select a template for follow-up emails.
- [x] Review Step: Users confirm the campaign details before sending.
- [x] Import Contacts: Users can upload existing contact lists to build their audience quickly, with validation and limits based on subscription tier.
  - [x] how can we add retargeting, lookalike audiences based on the selected niche and high engagement leads, and location.

Template Editor:
- [x] A drag-and-drop email builder that also integrates an SMS function.
- [x] It includes personalization fields and UTM parameters for tracking clicks, open rates, and conversions.
- [x] Templates saved here are reusable in the campaign creation flow and can be re-edited.

Campaign Analytics:
- [x] Provides live campaign stats, including options to pause, run, or stop campaigns.

Analytics Page:
- [x ] Shows live analytics of open rate, conversion rate, revenue, click rate, etc., displayed in charts.


Billing Page:
- [ ] New Pricing/Traffic Model Inspired by TikTok Ads:
- [x] Base Subscription (Membership Required)
- [x] Users must pay a monthly subscription to access the platform.
- [x] This unlocks core features, including email & SMS campaign creation, basic analytics, limited audience targeting, access to saved templates, and limited free credits.
- [x] Pay-As-You-Go "Ad Spend" Model: Users add funds to their account to spend on leads, SMS, and campaign boosts.
- [x] Dynamic Pricing (AI-Based Like TikTok): Users set a budget for email/SMS campaigns, and the AI optimizes spending based on lead engagement.

Maintain Code Consistency:
- [ ] All modifications should follow the current coding style and structure.
- [ ] Ensure that any new UI elements are integrated without breaking existing designs.

Testing & Rollout:
- [ ] After modifications, the code should be tested to ensure that the campaign creation flow, template editor sync, analytics, billing, and referral systems work seamlessly with the new features.

- [x] Fix the error related to templates.filter not being a function.